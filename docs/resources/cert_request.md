---
page_title: "tls_cert_request Resource - terraform-provider-tls"
subcategory: ""
description: |-
  Creates a Certificate Signing Request (CSR) in PEM (RFC 1421) https://datatracker.ietf.org/doc/html/rfc1421 format.
  PEM is the typical format used to request a certificate from a Certificate Authority (CA).
  This resource is intended to be used in conjunction with a Terraform provider for a particular certificate authority in order to provision a new certificate.
---

# tls_cert_request (Resource)

Creates a Certificate Signing Request (CSR) in [PEM (RFC 1421)](https://datatracker.ietf.org/doc/html/rfc1421) format.

PEM is the typical format used to request a certificate from a Certificate Authority (CA).

This resource is intended to be used in conjunction with a Terraform provider for a particular certificate authority in order to provision a new certificate.

~> **Warning** From Terraform 0.7.0 to 0.7.4 this resource was
converted to a data source, and the resource form of it was deprecated. This
turned out to be a design error since a cert request includes a random number
in the form of the signature nonce, and so the data source form of this
resource caused non-convergent configuration. The data source form is no longer
supported as of Terraform 0.7.5 and any users should return to using the
resource form.

~> **Warning** Versions of this provider prior to 1.2.0 may generate a
certificate request which cannot be validated by your Certificate Authority if
the `*` character is used in any of the `subject` fields, for example as part
of the `common_name` when generating a request for a wildcard certificate.
Strings containing a `*` and passed to the `dns_names` argument are encoded
correctly

-> **Note** This is a *logical resource*, so it contributes only to the current Terraform
state and does not create any external managed resources.


## Example Usage

```terraform
resource "tls_cert_request" "example" {
  key_algorithm   = "ECDSA"
  private_key_pem = file("private_key.pem")

  subject {
    common_name  = "example.com"
    organization = "ACME Examples, Inc"
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `key_algorithm` (String) Name of the algorithm used when generating the private key provided in `private_key_pem`.
- `private_key_pem` (String, Sensitive) PEM-encoded private key that the certificate will belong to. This can be read from a separate file using the `file` interpolation function. Only an irreversible secure hash of the private key will be stored in the Terraform state.
- `subject` (Block List, Min: 1) The subject for which a certificate is being requested. The acceptable arguments are all optional and their naming is based upon [Issuer Distinguished Names (RFC5280)](https://tools.ietf.org/html/rfc5280#section-4.1.2.4) section. (see [below for nested schema](#nestedblock--subject))

### Optional

- `dns_names` (List of String) List of DNS names for which a certificate is being requested (i.e. certificate subjects).
- `ip_addresses` (List of String) List of IP addresses for which a certificate is being requested (i.e. certificate subjects).
- `uris` (List of String) List of URIs for which a certificate is being requested (i.e. certificate subjects).

### Read-Only

- `cert_request_pem` (String) The certificate request data in [PEM (RFC 1421)](https://datatracker.ietf.org/doc/html/rfc1421) format.
- `id` (String) Unique identifier for this resource: hexadecimal representation of the SHA1 checksum of the resource.

<a id="nestedblock--subject"></a>
### Nested Schema for `subject`

Optional:

- `common_name` (String) Distinguished name: `CN`
- `country` (String) Distinguished name: `C`
- `locality` (String) Distinguished name: `L`
- `organization` (String) Distinguished name: `O`
- `organizational_unit` (String) Distinguished name: `OU`
- `postal_code` (String) Distinguished name: `PC`
- `province` (String) Distinguished name: `ST`
- `serial_number` (String) Distinguished name: `SERIALNUMBER`
- `street_address` (List of String) Distinguished name: `STREET`

## Generating a New Key

Since a private key is a logical resource that lives only in the Terraform state,
it will persist until it is explicitly destroyed by the user.

In order to force the generation of a new key within an existing state, the
private key instance can be "tainted":

```
terraform taint tls_private_key.example
```

A new key will then be generated on the next ``terraform apply``.
